<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.hanju.sellerPage.mapper.SellerPageMapper">

	<insert id="registerProduct" parameterType="hashmap" useGeneratedKeys="true" keyProperty="PRODUCT_ID" keyColumn="PRODUCT_ID">
		INSERT INTO TEST_PRODUCT
		VALUES (
			test_seq.nextVal,
			#{type},
			#{productName},
			#{price},
			'ADMIN',
			#{madeBy},
			#{alcohol},
			#{sparkling},
			#{sweet},
			#{sour},
			#{bitter},
			#{body},
			#{stock},
			#{capacity},
			#{material}
		)
	</insert>
	
	<insert id="uploadProductImg" parameterType="hashmap">
		INSERT INTO TEST_IMAGE
		VALUES (image_seq.nextVal, #{productId}, #{fileName}, #{fileOrgName}, #{filePath}, #{fileStatus})
	</insert>
	
	<select id="getTotalProductCount" parameterType="hashmap" resultType="Integer">
		SELECT	COUNT(*)
		FROM	HANJU_PRODUCT
		WHERE	SELLER_ID = #{userId}
	</select>
	
	<select id="getProductList" parameterType="hashmap" resultType="com.example.hanju.main.model.Product">
		SELECT	*
		FROM	HANJU_PRODUCT P
		INNER JOIN HANJU_CODE C  ON C.KIND = 'PRODUCT_CODE' AND P.TYPE = C.CODE
		INNER JOIN HANJU_IMAGE I ON P.PRODUCT_ID = I.FK_ID AND I.FILE_STATUS = 'T'
		WHERE	SELLER_ID = #{userId}
		ORDER BY P.PRODUCT_ID DESC
		OFFSET #{start} ROWS FETCH FIRST #{size} ROWS ONLY
	</select>
	
</mapper>